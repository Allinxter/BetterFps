
buildscript {
    repositories {
        mavenLocal()
        mavenCentral()
        maven {
            name = "forge"
            url = "http://files.minecraftforge.net/maven"
        }
        maven {
            name = "sonatype"
            url = "https://oss.sonatype.org/content/repositories/snapshots/"
        }
    }
    dependencies {
        classpath 'net.minecraftforge.gradle:ForgeGradle:2.1-SNAPSHOT'
    }
}

apply plugin: 'net.minecraftforge.gradle.tweaker-client'

version = "1.3.0"
group = "guichaguri.betterfps"
archivesBaseName = "betterfps"

minecraft {
    version = "1.9"
    runDir = "run"
    tweakClass = "guichaguri.betterfps.tweaker.BetterFpsTweaker";
    mappings = "snapshot_20160507"

    at 'betterfps_at.cfg'
}

jar {
    manifest {
        attributes  'TweakClass': 'guichaguri.betterfps.tweaker.BetterFpsTweaker',
                    'TweakOrder': '600',
                    'TweakMetaFile': 'betterfps.json',
                    'TweakName': 'BetterFps',
                    'TweakAuthor': 'Guichaguri',
                    'TweakVersion': project.version,
                    'Main-Class': 'guichaguri.betterfps.installer.BetterFpsInstaller'
    }
}

dependencies {
    //compile 'org.ow2.asm:asm-debug-all:5.0.3'
    //compile 'net.minecraft:launchwrapper:1.12'
}

processResources {
    // this will ensure that this task is redone when the version change.
    inputs.property "version", project.version

    // replace stuff in the json, nothing else
    from(sourceSets.main.resources.srcDirs) {
        include 'META-INF/betterfps.json'

        // replace version
        expand 'version': project.version
    }

    // copy everything else, thats not the json
    from(sourceSets.main.resources.srcDirs) {
        exclude 'META-INF/betterfps.json'
    }
}


runClient.args "--username", "BetterFps"